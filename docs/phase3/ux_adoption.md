# フェーズ3の思想（Why）

現場ユーザーは「何をすればいいかが見える」時に初めて使い続けられる。  
本フェーズは、機能の追加ではなく「迷わない体験の設計」と「継続利用の導線づくり」を目的にする。

## 体験フロー図（文章ベース）

1. 初回ログイン
   - ダッシュボードで「最初にやること」を明示
   - 空状態に具体的な次アクションを提示
2. 初期設定完了
   - ユーザー/ロール/権限の整備まで到達
   - 完了度が可視化される
3. 定常利用（毎日/毎週）
   - 最近の操作/確認項目が自然に表示される
   - 必要な画面への導線が短く、迷いがない
4. 権限変更/担当交代
   - 役割に応じた UI が維持される
   - できない操作が UI に出ない

## UX施策リスト（実装前提）

- **オンボーディング**
  - ダッシュボードに「初期セットアップ」カードを表示
  - 進捗（完了数/総数）と次のアクションを常時表示
- **空状態**
  - 一覧画面に「次の行動」ボタンを明示
  - 説明文は短く、具体的なアクションにつなげる
- **CTA**
  - 画面右上の主ボタンは「次にすべきこと」に限定
  - ダッシュボードで次アクションを提示
- **通知/リマインド**
  - 監査ログの最新5件を提示し、日次確認の導線を作る
  - 過剰な通知は避け、一覧内で自然に確認できる形にする
- **権限とUIの整合**
  - `can?` のみで UI 出し分け
  - 権限がない操作は CTA も出さない
- **エラー/未設定フォロー**
  - 空状態の文面に「何をすべきか」を明示
  - 未設定が続く項目にはセットアップ導線を維持

## Rails実装指針

- **Controller**
  - 画面固有の集計値や「次にやること」を用意
  - データ取得は `can?` 前提で絞る
- **View**
  - UI 出し分けは `can?` に限定
  - empty state / CTA はテンプレ化し、文言差分のみ変える
- **Helper/Component**
  - 画面共通要素（パンくず/空状態/ステップ表示）は partial 化
- **Tailwind**
  - 重要な行動は視覚的に目立たせる
  - コントラストの強い色は CTA だけに限定
- **Turbo/Stimulus**
  - 初期セットアップの完了チェックや簡易ガイドを段階表示する箇所に使用

## 管理画面UXルール

- **やってはいけないこと**
  - 権限がない操作を UI に出す
  - 何もない画面をそのまま表示する
  - 重要な操作に確認を付けない
- **一覧/詳細/編集の理想構成**
  - 一覧: 状態・次アクション・CTA を上部に集約
  - 詳細: 重要情報 → アクション → 変更履歴の順で整理
  - 編集: 変更対象と保存/キャンセルを常に近くに配置
- **保存/戻る/キャンセル**
  - 保存は右側、戻る/キャンセルは左側に固定
  - 破壊的操作は `turbo_confirm` を必須
- **「設定したまま忘れられる」を防ぐ**
  - ダッシュボードで最新操作を提示
  - 未完了のセットアップを常時表示

## Definition of Done

- 初見ユーザーが説明なしで操作できるか
- 権限による違和感がないか
- 毎日使う理由がUIに存在するか
- サポート問い合わせを減らせるか
