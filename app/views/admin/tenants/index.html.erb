<% content_for :page_title do %>
  テナント一覧
<% end %>

<div class="space-y-4">
  <div class="flex items-center justify-between gap-3">
    <div>
      <h1 class="text-xl font-semibold text-slate-900">テナント一覧</h1>
      <p class="text-sm text-slate-600">表示されるのは現在のテナントのみです。</p>
    </div>
    <% if @tenant && can?("admin.tenants.update") %>
      <%= link_to "設定を編集", edit_admin_tenant_path(@tenant), class: "rounded-lg bg-sky-600 px-4 py-2 text-sm font-semibold text-white hover:bg-sky-700" %>
    <% end %>
  </div>

  <% if @tenants.any? %>
    <div class="grid grid-cols-1 gap-4">
      <% @tenants.each do |tenant| %>
        <div class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm">
          <div class="flex items-start justify-between">
            <div>
              <h2 class="text-lg font-semibold text-slate-900"><%= tenant.name %></h2>
              <p class="text-sm text-slate-600"><%= tenant.subdomain %>.example.com</p>
            </div>
            <div class="text-right text-xs text-slate-500">
              <div>コード: <%= tenant.code %></div>
              <div>プラン: <%= tenant.plan %></div>
              <div>ステータス: <%= tenant.status %></div>
            </div>
          </div>

          <dl class="mt-3 grid grid-cols-1 gap-2 text-sm text-slate-700 sm:grid-cols-2">
            <div class="flex items-center justify-between rounded-lg bg-slate-50 px-3 py-2">
              <dt class="font-medium text-slate-800">請求メール</dt>
              <dd><%= tenant.billing_email %></dd>
            </div>
            <div class="flex items-center justify-between rounded-lg bg-slate-50 px-3 py-2">
              <dt class="font-medium text-slate-800">最終更新</dt>
              <dd><%= tenant.updated_at&.strftime("%Y-%m-%d %H:%M") %></dd>
            </div>
          </dl>

          <div class="mt-4 flex flex-wrap gap-2">
            <% if can?("admin.tenants.read") %>
              <%= link_to "詳細", admin_tenant_path(tenant), class: "rounded border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50" %>
            <% end %>
            <% if can?("admin.tenants.update") %>
              <%= link_to "編集", edit_admin_tenant_path(tenant), class: "rounded border border-sky-200 bg-sky-50 px-3 py-1.5 text-sm font-semibold text-sky-700 hover:bg-sky-100" %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="rounded-lg border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600">
      表示できるテナントがありません。
    </div>
  <% end %>
</div>
