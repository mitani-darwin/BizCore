<% content_for :page_title, @tenant.name %>

<div class="mx-auto max-w-5xl px-4 py-6 sm:px-6 lg:px-8">
  <div class="mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <h1 class="text-xl font-semibold text-slate-900"><%= @tenant.name %></h1>
      <p class="mt-1 text-sm text-slate-500">
        テナントの基本情報を確認します。プランやステータスはここで把握できます。
      </p>
    </div>
    <div class="flex items-center gap-2">
      <span class="inline-flex items-center rounded-full bg-slate-100 px-2.5 py-1 text-xs font-semibold text-slate-700">
        コード: <%= @tenant.code %>
      </span>
      <span class="inline-flex items-center rounded-full bg-slate-100 px-2.5 py-1 text-xs font-semibold text-slate-700">
        サブドメイン: <%= @tenant.subdomain %>
      </span>
    </div>
  </div>

  <div class="grid gap-4 lg:grid-cols-3">
    <div class="lg:col-span-2 space-y-4">
      <section class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
        <div class="flex items-center gap-2">
          <% plan_label, plan_badge_class =
            case @tenant.plan
            when "free"
              ["フリー", "bg-slate-50 text-slate-700"]
            when "standard"
              ["スタンダード", "bg-sky-50 text-sky-700"]
            when "enterprise"
              ["エンタープライズ", "bg-slate-900/90 text-slate-50"]
            else
              [@tenant.plan.to_s, "bg-slate-100 text-slate-600"]
            end %>

          <% status_label, status_badge_class, status_dot_class =
            case @tenant.status
            when "active"
              ["有効", "bg-emerald-50 text-emerald-700", "bg-emerald-500"]
            when "trial"
              ["トライアル中", "bg-amber-50 text-amber-700", "bg-amber-500"]
            when "suspended"
              ["一時停止", "bg-slate-100 text-slate-600", "bg-slate-400"]
            else
              [@tenant.status.to_s, "bg-slate-100 text-slate-600", "bg-slate-400"]
            end %>

          <span class="inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold <%= plan_badge_class %>">
            プラン: <%= plan_label %>
          </span>
          <span class="inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-semibold <%= status_badge_class %>">
            <span class="h-1.5 w-1.5 rounded-full <%= status_dot_class %>"></span>
            ステータス: <%= status_label %>
          </span>
        </div>

        <dl class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2">
          <div class="rounded-lg border border-slate-100 bg-slate-50 px-4 py-3">
            <dt class="text-xs text-slate-500">請求先メール</dt>
            <dd class="text-sm font-semibold text-slate-800 break-all"><%= @tenant.billing_email %></dd>
          </div>
          <div class="rounded-lg border border-slate-100 bg-slate-50 px-4 py-3">
            <dt class="text-xs text-slate-500">主ドメイン</dt>
            <dd class="text-sm font-semibold text-sky-700"><%= @tenant.primary_domain %></dd>
          </div>
          <div class="rounded-lg border border-slate-100 bg-slate-50 px-4 py-3">
            <dt class="text-xs text-slate-500">利用開始</dt>
            <dd class="text-sm font-semibold text-slate-800"><%= @tenant.started_on&.strftime("%Y-%m-%d") %></dd>
          </div>
          <div class="rounded-lg border border-slate-100 bg-slate-50 px-4 py-3">
            <dt class="text-xs text-slate-500">最終更新</dt>
            <dd class="text-sm font-semibold text-slate-800"><%= @tenant.updated_at&.strftime("%Y-%m-%d %H:%M") %></dd>
          </div>
        </dl>
      </section>
    </div>

    <div class="space-y-4">
      <section class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
        <h2 class="text-sm font-semibold text-slate-900">操作</h2>
        <div class="mt-3 space-y-2">
          <%= link_to "一覧に戻る", admin_tenants_path, class: "block rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 text-center" %>
          <%= link_to "編集（未実装）", "#", class: "block rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-400 text-center cursor-not-allowed", aria: { disabled: true } %>
        </div>
      </section>
    </div>
  </div>
</div>
